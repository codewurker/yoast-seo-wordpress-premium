(()=>{var e={951:(e,t)=>{var n;!function(){"use strict";var s={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)){if(n.length){var i=o.apply(null,n);i&&e.push(i)}}else if("object"===r){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var a in n)s.call(n,a)&&n[a]&&e.push(a)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.React,t=window.wp.data,s=window.wp.domReady;var o=n.n(s);const r=window.wp.element,i=window.wp.hooks,a=window.yoast.uiLibrary,l=window.lodash,c=window.wp.i18n,d="loading",u="success",p="error",g="error",m="fullContent",h={keyphraseDensityAIFixes:{title:(0,c.__)("AI - Keyphrase density","wordpress-seo-premium"),description:(0,c.__)("Use keyphrase words in the text frequently but not excessively.","wordpress-seo-premium"),parameterName:"seo-keyphrase-density",storeName:"keyphraseDensity",promptContent:m},introductionKeywordAIFixes:{title:(0,c.__)("AI - Keyphrase in introduction","wordpress-seo-premium"),description:(0,c.__)("Include words from the keyphrase in the first paragraph of the text.","wordpress-seo-premium"),parameterName:"seo-keyphrase-introduction",storeName:"keyphraseIntroduction",promptContent:"introduction"},keyphraseDistributionAIFixes:{title:(0,c.__)("AI - Keyphrase distribution","wordpress-seo-premium"),description:(0,c.__)("Evenly distribute keyphrase words throughout the text.","wordpress-seo-premium"),parameterName:"seo-keyphrase-distribution",storeName:"keyphraseDistribution",promptContent:m},subheadingsKeywordAIFixes:{title:(0,c.__)("AI - Keyphrase in subheadings","wordpress-seo-premium"),description:(0,c.__)("Include at least one word from the keyphrase in each subheading.","wordpress-seo-premium"),parameterName:"seo-keyphrase-subheadings",storeName:"keyphraseSubheadings",promptContent:m},textSentenceLengthAIFixes:{title:(0,c.__)("AI - Sentence length","wordpress-seo-premium"),description:(0,c.__)("Ensure long sentences are shortened or split for better readability.","wordpress-seo-premium"),parameterName:"read-sentence-length",storeName:"sentenceLength",promptContent:"sentenceLength"},textParagraphTooLongAIFixes:{title:(0,c.__)("AI - Paragraph length","wordpress-seo-premium"),description:(0,c.__)("Ensure long paragraphs are shortened or split for better readability.","wordpress-seo-premium"),parameterName:"read-paragraph-length",storeName:"paragraphLength",promptContent:"paragraphLength"}},y="yoast-seo/ai-generator",f="yoast-seo-premium/ai-optimize",w={blockEditor:"Gutenberg",classicEditor:"Classic",elementorEditor:"Elementor"},b="yoast-seo/editor",E="core/block-editor",C=window.yoast.propTypes;var S=n.n(C);const I=window.yoast.aiFrontend;var x=n(951),v=n.n(x);const k=window.yoast.reduxJsToolkit,M=window.wp.apiFetch;var L=n.n(M);const P=window.yoast.analysis,T=(0,l.get)(window,"yoast.editorModules.aiGenerator.helpers.removesLocaleVariantSuffixes",l.noop),A={ja:e=>Math.round(e.length/2),default:e=>Math.round(e.length/4)},F=e=>{const n=(0,t.select)(b).getContentLocale();return(A[n]||A.default)(e)},R=window.wp.dom,N=new DOMParser,q=e=>{const t=N.parseFromString("<body>"+e+"</body>","text/html");let n=!1;return t.querySelectorAll("ins.yst-diff").forEach((e=>{(0,R.unwrap)(e),n=!0})),t.querySelectorAll("del.yst-diff").forEach((e=>{(0,R.remove)(e),n=!0})),n?t.body.innerHTML:e},_=e=>{const t=N.parseFromString("<body>"+e+"</body>","text/html");let n=!1;return t.querySelectorAll("ins.yst-diff").forEach((e=>{(0,R.remove)(e),n=!0})),t.querySelectorAll("ins.yst-paragraph").forEach((e=>{e.textContent=" ",(0,R.unwrap)(e),n=!0})),t.querySelectorAll("del.yst-diff").forEach((e=>{(0,R.unwrap)(e),n=!0})),n?t.body.innerHTML:e};class O{getContentRetrievalStrategy(){throw new Error("Method 'getContentRetrievalStrategy' must be implemented.")}addElementTargetingLogic(e){throw new Error("Method 'addElementTargetingLogic' must be implemented.")}cleanUpElementTargetingLogic(){throw new Error("Method 'cleanUpElementTargetingLogic' must be implemented.")}getEditorContent(){throw new Error("Method 'getEditorContent' must be implemented.")}resetEditorContent(e){throw new Error("Method 'resetEditorContent' must be implemented.")}previewSuggestions(e){throw new Error("Method 'previewSuggestions' must be implemented.")}applySuggestions(){throw new Error("Method 'applySuggestions' must be implemented.")}dismissSuggestions(){throw new Error("Method 'dismissSuggestions' must be implemented.")}removeAutosave(){throw new Error("Method 'removeAutosave' must be implemented.")}disableEditingMode(){throw new Error("Method 'disableEditingMode' must be implemented.")}enableEditingMode(){throw new Error("Method 'enableEditingMode' must be implemented.")}closeSidebar(){throw new Error("Method 'closeSidebar' must be implemented.")}getFullScreenClass(){throw new Error("Method 'getFullScreenClass' must be implemented.")}}const B=window.wp.blocks;class D{getIntroductionText(e,t){throw new Error("Method 'getIntroductionText()' must be implemented.")}getFullText(e,t){throw new Error("Method 'getFullText()' must be implemented.")}getParagraphLengthPromptContent(e,t){throw new Error("Method 'getParagraphLengthPromptContent()' must be implemented.")}getSentenceLengthPromptContent(e,t){throw new Error("Method 'getSentenceLengthPromptContent()' must be implemented.")}shouldRetrievePromptContent(){throw new Error("Method 'shouldRetrievePromptContent()' must be implemented.")}}class U extends D{constructor(){super(),this.getSentenceLengthPromptContent=this.getSentenceLengthPromptContent.bind(this),this.getParagraphLengthPromptContent=this.getParagraphLengthPromptContent.bind(this),this.getFullText=this.getFullText.bind(this),this.getIntroductionText=this.getIntroductionText.bind(this),this.cleanUpContent=this.cleanUpContent.bind(this),this.getRelevantPromptContent=this.getRelevantPromptContent.bind(this),this.shouldRetrievePromptContent=this.shouldRetrievePromptContent.bind(this)}cleanUpContent(e,t=(e=>e)){return(e=t(e=_(e))).replace(/\n/g,"")}async getIntroductionText(e){const n=(0,l.get)(window,"YoastSEO.analysis.worker.runResearch",l.noop),{result:s}=await n("findKeywordInFirstParagraph",e);if(!s)return{text:"",length:0,type:"introduction",uniqueIds:[]};const o=s.introduction,r=s.parentBlock;if(!o||!r)return{text:"",length:0,type:"introduction",uniqueIds:[]};if("core/freeform"===r.name){const{startOffset:e,endOffset:t}=o.sourceCodeLocation,n=this.cleanUpContent(r.attributes.content,(n=>n.slice(e-r.startOffset,t-r.startOffset)));return{text:n,length:F(n),type:"introduction",uniqueIds:[]}}const{getBlocksByClientId:i}=(0,t.select)(E),a=i(o.clientId);if(!a[0])return{text:"",length:0,type:"introduction",uniqueIds:[]};const c=ie(a),d=this.cleanUpContent((0,B.serialize)(c,{isInnerBlocks:!1}));return{text:d,length:F(d),type:"introduction",uniqueIds:c.map((e=>e.clientId))}}getFullText(){const{getBlocks:e}=(0,t.select)(E),n=ie(e()),s=(0,B.serialize)(n,{isInnerBlocks:!1}),o=this.cleanUpContent(s);return{text:o,length:F(o),type:"fullContent",uniqueIds:n.map((e=>e.clientId))}}getRelevantPromptContent(e,n){if(!e||!e._hasMarks)return{text:"",length:0,type:n,uniqueIds:[]};const s=e.marks,o=new Set(s.map((e=>e._properties.position&&e._properties.position.clientId))),{getBlocksByClientId:r}=(0,t.select)(E),i=[];if(o.forEach((e=>{const[t]=r(e);e&&t&&i.push(t)})),!i.length)return{text:"",length:0,type:n,uniqueIds:[]};let a=[];a="paragraphLength"===n?ie(i,["core/paragraph","core/heading","core/list-item"]):ie(i);const l=a.map((e=>e.clientId)),c=(0,B.serialize)(a,{isInnerBlocks:!1}),d=this.cleanUpContent(c);return{text:d,length:F(d),type:n,uniqueIds:l}}getParagraphLengthPromptContent(){const e=(0,t.select)(b).getReadabilityResults().results.find((e=>"textParagraphTooLong"===e._identifier));return this.getRelevantPromptContent(e,"paragraphLength")}getSentenceLengthPromptContent(){const e=(0,t.select)(b).getReadabilityResults().results.find((e=>"textSentenceLength"===e._identifier));return this.getRelevantPromptContent(e,"sentenceLength")}shouldRetrievePromptContent(){return!0}}class z extends O{constructor(){super(),this._contentRetrievalStrategy=new U,this.getContentRetrievalStrategy=this.getContentRetrievalStrategy.bind(this),this.addElementTargetingLogic=this.addElementTargetingLogic.bind(this)}getEditorContent(){return(0,t.select)(E).getBlocks()}resetEditorContent(e){(0,t.dispatch)("core/editor").resetEditorBlocks(e)}previewSuggestions(e){return ue(e)}applySuggestions(){se()}dismissSuggestions(){ne()}removeAutosave(){(()=>{const{lockPostSaving:e,unlockPostSaving:n}=(0,t.useDispatch)("core/editor");(0,r.useEffect)((()=>(e("ai-optimize"),()=>{n("ai-optimize")})),[])})()}disableEditingMode(){(()=>{const e=(0,t.useSelect)((e=>{const t=e(E).getBlocks(),n=ie(t);return(0,l.unionBy)(t,n,"clientId")}),[]),{setBlockEditingMode:n}=(0,t.useDispatch)(E);(0,r.useEffect)((()=>(e.forEach((e=>n(e.clientId,"disabled"))),()=>pe())),[e])})()}enableEditingMode(){pe()}closeSidebar(){window.innerWidth<=768&&(0,t.dispatch)("core/edit-post").closeGeneralSidebar()}getFullScreenClass(){return(0,t.useSelect)((e=>e("core/preferences").get("core/edit-post","fullscreenMode")?"":"lg:yst-start-44"),[])}getContentRetrievalStrategy(){return this._contentRetrievalStrategy}addElementTargetingLogic(e){return new Promise((n=>{var s;const o=null===(s=h[e])||void 0===s?void 0:s.promptContent,r=(0,t.select)(f).selectPromptContentData(o);n({text:r.text,length:r.length,type:o,uniqueIds:r.uniqueIds})}))}cleanUpElementTargetingLogic(){(0,l.noop)()}}const H=new DOMParser,j="data-yst-optimize",V=["P","H1","H2","H3","H4","H5","H6","LI"];class $ extends D{constructor(){super(),this.getIntroductionText=this.getIntroductionText.bind(this),this.getFullText=this.getFullText.bind(this),this.getRelevantPromptContent=this.getRelevantPromptContent.bind(this),this.filterNodes=this.filterNodes.bind(this),this.getParagraphLengthPromptContent=this.getParagraphLengthPromptContent.bind(this),this.getSentenceLengthPromptContent=this.getSentenceLengthPromptContent.bind(this),this.shouldRetrievePromptContent=this.shouldRetrievePromptContent.bind(this),this.getNodesAtOffsets=this.getNodesAtOffsets.bind(this)}filterNodes(e,t){var n,s,o;const r=e.hasClass(t.firstChild,"wp-more-tag"),i="BLOCKQUOTE"===(null===(n=t.parentNode)||void 0===n?void 0:n.nodeName),a="\n"===t.outerText||"BR"===(null===(s=t.firstChild)||void 0===s?void 0:s.nodeName),l=(null===(o=t.children)||void 0===o?void 0:o.length)>0&&Object.values(t.children).every((e=>"IMG"===e.nodeName));return!(r||i||a||l)}async getIntroductionText(e,t){const{injectAttributes:n}=t,s=(0,l.get)(window,"YoastSEO.analysis.worker.runResearch",l.noop),{result:o}=await s("findKeywordInFirstParagraph",e),r=tinyMCE.get("content"),i=null==r?void 0:r.dom;if(null==o||!o.introduction||!i)return{text:"",length:0,type:"introduction",uniqueIds:[]};const a=o.introduction,c=a.isImplicit?o.parentBlock.name:a.name;let d=i.select(`${c}`);d=d.filter((e=>this.filterNodes(i,e)));const{startOffset:u,endOffset:p}=a.sourceCodeLocation,g=r.getContent().slice(u,p),m=H.parseFromString("<body>"+g+"</body>","text/html");let h;d.some((e=>e.textContent.trim()===m.body.textContent.trim()&&(h=e,!0)));let y=[],f="";return h&&(n&&(y=this.setOptimizeDataAttribute([h],i)),f=h.outerHTML),{text:f,length:F(f),type:"introduction",uniqueIds:y}}getFullText(e,t){const{injectAttributes:n}=t,s=tinyMCE.get("content").dom;if(!s)return{text:"",length:0,type:"fullContent",uniqueIds:[]};const o=V.join(", ");let r=s.select(o);if(r=r.filter((e=>this.filterNodes(s,e))),r.length>0&&r.every((e=>e.nodeName.startsWith("H"))))return{text:"",length:0,type:"fullContent",uniqueIds:[]};let i=[];n&&(i=this.setOptimizeDataAttribute(r,s));const a=r.map((e=>e.outerHTML)).join("");return{text:a,length:F(a),type:"fullContent",uniqueIds:i}}setOptimizeDataAttribute(e,t){const n=[];return e.forEach((e=>{const s=t.getAttrib(e,j)||"";if(s)n.push(s);else{const s=(0,l.uniqueId)();t.setAttrib(e,j,s),n.push(s)}})),[...new Set(n)]}getMarksOffsets(e){return e.map((e=>e._properties.position.startOffset))}isMarkOffsetInRange(e,t,n){return e>=t&&e<t+n}getNodesAtOffsets(e,t){const n=this.getMarksOffsets(t),s=e.getBody(),o=new Set;let r=0;for(const e of(null==s?void 0:s.children)||[]){if(!V.includes(e.nodeName))continue;const t=e.outerHTML.length;for(const s of n)if(this.isMarkOffsetInRange(s,r,t)){o.add(e);break}r+=t}return Array.from(o)}getRelevantPromptContent(e,t,n){const s=tinyMCE.get("content"),o=s.dom;if(!e||!e._hasMarks||!o)return{text:"",length:0,type:t,uniqueIds:[]};let r=e.marks;r=(0,l.orderBy)(r,(e=>e._properties.position.startOffset),["asc"]);const i=this.getNodesAtOffsets(s,r).filter((e=>null!==e)).filter((e=>this.filterNodes(o,e)));let a=[];n&&(a=this.setOptimizeDataAttribute(i,o));const c=i.map((e=>e.outerHTML)).join("");return{text:c,length:F(c),type:t,uniqueIds:a}}getParagraphLengthPromptContent(e,n){const{injectAttributes:s}=n,o=(0,t.select)(b).getReadabilityResults().results.find((e=>"textParagraphTooLong"===e._identifier));return this.getRelevantPromptContent(o,"paragraphLength",s)}getSentenceLengthPromptContent(e,n){const{injectAttributes:s}=n,o=(0,t.select)(b).getReadabilityResults().results.find((e=>"textSentenceLength"===e._identifier));return this.getRelevantPromptContent(o,"sentenceLength",s)}shouldRetrievePromptContent(){return!!tinyMCE.get("content")&&!1===tinyMCE.get("content").isHidden()}}const K=/\bai-optimize-[^\s]*\b/gi;function Y(e,t=!0){const n=e.dom,s=V.join(", "),o=n.select(s);o&&0!==o.length&&o.forEach((e=>{if(n.getAttrib(e,j)&&n.setAttrib(e,j,null),t){const t=(n.getAttrib(e,"class")||"").replace(K,"").trim();n.setAttrib(e,"class",t)}}))}class W extends O{constructor(){super(),this._contentRetrievalStrategy=new $,this.getContentRetrievalStrategy=this.getContentRetrievalStrategy.bind(this),this.addElementTargetingLogic=this.addElementTargetingLogic.bind(this)}getEditorContent(){const e=tinyMCE.get("content");if(e)return e.getContent()}resetEditorContent(e){const t=tinyMCE.get("content");t&&t.setContent(e)}previewSuggestions(e){return me(e)}applySuggestions(){fe()}dismissSuggestions(){we()}removeAutosave(){(0,r.useEffect)((()=>(wp.autosave.server.suspend(),()=>wp.autosave.server.resume())),[]),(0,r.useEffect)((()=>{const e=(e,t)=>{const n=document.getElementById(e);n&&(n.disabled=t)};return e("publish",!0),e("save-post",!0),()=>{e("publish",!1),e("save-post",!1)}}),[])}disableEditingMode(){(0,r.useEffect)((()=>{const e=e=>{const t=document.getElementById("content-html");t&&(t.disabled=e)};e(!0);const t=tinyMCE.get("content");return t?(t.setMode("readonly"),()=>{t.setMode("design"),e(!1)}):(console.warn("TinyMCE editor not found. Cannot set edit mode."),l.noop)}),[])}enableEditingMode(){const e=tinyMCE.get("content");e&&e.setMode("design")}closeSidebar(){window.innerWidth<=768&&(0,l.noop)()}getFullScreenClass(){return null!==document.fullscreenElement?"":"lg:yst-start-44"}getContentRetrievalStrategy(){return this._contentRetrievalStrategy}async addElementTargetingLogic(e){try{var t;const n=this.getContentRetrievalStrategy(),s=(0,l.get)(window,"YoastSEO.analysis.collectData",!1),o=s?P.Paper.parse(s()):null,r=null===(t=h[e])||void 0===t?void 0:t.promptContent;return await(async(e,t)=>{const n={fullContent:e.getFullText,introduction:e.getIntroductionText,paragraphLength:e.getParagraphLengthPromptContent,sentenceLength:e.getSentenceLengthPromptContent},{editorData:s,contentType:o}=t,r=n[o];return await r(s,{injectAttributes:!0})})(n,{editorData:o,contentType:r})}catch(e){console.error("Error adding data attributes:",e)}}cleanUpElementTargetingLogic(){Y(tinyMCE.get("content"),!1)}}class G{constructor(e){if(this._strategy=null,"blockEditor"===e)this._strategy=new U;else{if("classicEditor"!==e)throw new Error("Unsupported editor");this._strategy=new $}this.getSentenceLengthPromptContent=this.getSentenceLengthPromptContent.bind(this),this.getParagraphLengthPromptContent=this.getParagraphLengthPromptContent.bind(this),this.getFullText=this.getFullText.bind(this),this.getIntroductionText=this.getIntroductionText.bind(this),this.shouldRetrievePromptContent=this.shouldRetrievePromptContent.bind(this)}getIntroductionText(e,t){if(!this._strategy)throw new Error("Strategy not available");if(!this._strategy.getIntroductionText)throw new Error("Method 'getIntroductionText()' not implemented");return this._strategy.getIntroductionText(e,t)}getFullText(e,t){if(!this._strategy)throw new Error("Strategy not available");if(!this._strategy.getFullText)throw new Error("Method 'getFullText()' not implemented");return this._strategy.getFullText(e,t)}getParagraphLengthPromptContent(e,t){if(!this._strategy)throw new Error("Strategy not available");if(!this._strategy.getParagraphLengthPromptContent)throw new Error("Method 'getParagraphLengthPromptContent()' not implemented");return this._strategy.getParagraphLengthPromptContent(e,t)}getSentenceLengthPromptContent(e,t){if(!this._strategy)throw new Error("Strategy not available");if(!this._strategy.getSentenceLengthPromptContent)throw new Error("Method 'getSentenceLengthPromptContent()' not implemented");return this._strategy.getSentenceLengthPromptContent(e,t)}shouldRetrievePromptContent(){if(!this._strategy)throw new Error("Strategy not available");if(!this._strategy.shouldRetrievePromptContent)throw new Error("Method 'shouldRetrievePromptContent()' not implemented");return this._strategy.shouldRetrievePromptContent()}}const Q=window.wp.htmlEntities,J=(e,n)=>{const s=(0,t.select)(E).getBlockRootClientId(e);s&&(0,t.dispatch)(E).setBlockEditingMode(s,n)},X=new DOMParser,Z=()=>{const e=(0,t.select)(b).getActiveAIFixesButton(),{selectUniqueIds:n}=(0,t.select)(f),{getBlocks:s,getBlocksByClientId:o}=(0,t.select)(E);if(!e){const e=s();return{storeName:"",blockIds:e.map((e=>e.clientId)),blocks:e}}const r=h[e].promptContent,i=n(r);return{storeName:r,blockIds:i,blocks:o(i)}},ee=e=>{const{updateUniqueIds:n}=(0,t.dispatch)(f),{replaceBlock:s}=(0,t.dispatch)(E),{storeName:o,blockIds:r,blocks:i}=Z();let a=r;i.forEach((t=>{const n=(0,B.serialize)([t],{isInnerBlocks:!1}),o=(0,Q.decodeEntities)(e(n));if(n!==o){const e=(0,B.parse)(o,{})[0];J(t.clientId,"default"),s(t.clientId,e),a=a.toSpliced(a.indexOf(t.clientId),1,e.clientId)}})),o&&n({promptContentType:o,uniqueIds:a})},te=e=>{const t=X.parseFromString("<body>"+e+"</body>","text/html");let n=!1;for(;t.querySelector("ins.yst-paragraph");){const e=t.querySelector("ins.yst-paragraph"),s=t.createTreeWalker(t.body,NodeFilter.SHOW_COMMENT),o=s.nextNode().cloneNode(!1);let r=null;for(;s.nextNode();)r=s.currentNode;const i=r.cloneNode(!1);let a=e.parentNode.cloneNode(!1);const l=[];e.parentNode.childNodes.forEach((t=>{t===e?(l.push(a),l.push(i),l.push(o),a=e.parentNode.cloneNode(!1)):a.appendChild(t.cloneNode(!0))})),l.push(a),e.parentNode.replaceWith(...l),n=!0}return n?t.body.innerHTML:e},ne=()=>{const e=(0,l.get)(window,"YoastSEO.app.refresh",l.noop);ee(_),e()},se=()=>{const e=(0,l.get)(window,"YoastSEO.app.refresh",l.noop);ee(q);const n=(0,t.select)(b).getActiveAIFixesButton();n&&"textParagraphTooLongAIFixes"===n&&(()=>{const{storeName:e,blockIds:n,blocks:s}=Z(),{replaceBlock:o}=(0,t.dispatch)(E),{updateUniqueIds:r}=(0,t.dispatch)(f);let i=n;s.forEach((e=>{const t=(0,B.serialize)([e],{isInnerBlocks:!1});if(!t.includes('<ins class="yst-paragraph">'))return;const n=te(t),s=(0,B.parse)(n,{});o(e.clientId,s);const r=s.map((e=>e.clientId));i=i.toSpliced(i.indexOf(e.clientId),1,...r)})),e&&r({promptContentType:e,uniqueIds:i})})(),e()},oe=["core/paragraph","core/heading","core/list-item","core/table"],re=["core/quote","core/cover"],ie=(e,t=oe)=>e.reduce(((e,n)=>re.includes(n.name)||(e=>{var t;return!(t=(0,B.getBlockContent)(e),(new DOMParser).parseFromString(t,"text/html").documentElement.textContent).trim()})(n)?e:t.includes(n.name)?[...e,n]:n.innerBlocks.length>0?[...e,...ie(n.innerBlocks,t)]:e),[]),ae=(e,t)=>!(!e||!t||(t.isValid?e.name!==t.name&&(console.error("The type of block from the editor does not match the type of block parsed from the AI suggestion."),1):(console.error("The block parsed from the AI suggestion is not valid."),1))),le=e=>{const t=document.querySelector('[data-block="'+e+'"]');t&&t.scrollIntoView({behavior:"smooth",block:"start"})},ce=()=>{(0,i.addFilter)("yoast.analysis.data","yoast-seo-premium/ai-suggestion-analysis-data-modifier",(e=>({...e,text:q(te(e.text))})))},de=()=>{(0,t.select)(E).getBlocksByName("core/details").forEach((e=>{(0,t.dispatch)(E).updateBlockAttributes(e,{showContent:!0})}))},ue=e=>{const n=(0,t.select)(b).getActiveAIFixesButton(),s=h[n].promptContent;return"introductionKeywordAIFixes"===n?((e,n)=>{const{getBlocksByClientId:s}=(0,t.select)(E),{replaceBlock:o}=(0,t.dispatch)(E),{updateUniqueIds:r}=(0,t.dispatch)(f),i=(0,l.get)(window,"YoastSEO.analysis.worker.runResearch",l.noop),a=(0,l.get)(window,"YoastSEO.analysis.collectData",!1);return i("findKeywordInFirstParagraph",a?P.Paper.parse(a()):null).then((i=>{if(i.result){const a=i.result.introduction,l=i.result.parentBlock;if(!a||!l)return;if("core/freeform"===l.name)((e,n,s)=>{const{updateBlockAttributes:o}=(0,t.dispatch)(E),{startOffset:r,endOffset:i}=e.sourceCodeLocation,a=_(n.attributes.content),l=a.slice(0,r-n.startOffset)+s+a.slice(i-n.startOffset),c=n.clientId;J(c,"default"),o(c,{content:l}),J(c,"disabled"),le(c),ce()})(a,l,e),r({promptContentType:n,uniqueIds:[l.clientId]});else{const t=a.clientId,i=s(t),l=ie(i)[0],c=(0,B.parse)(e,{})[0];if(!ae(l,c))throw new Error("Error");{const{clientId:e}=l;J(e,"default"),o(e,c),J(c.clientId,"disabled"),de(),le(e),ce(),r({promptContentType:n,uniqueIds:[c.clientId]})}}}}))})(e,s):function(e,n){const{replaceBlock:s}=(0,t.dispatch)(E),{updateUniqueIds:o}=(0,t.dispatch)(f),{getBlocksByClientId:r}=(0,t.select)(E),i=r((0,t.select)(f).selectUniqueIds(n)),a=(0,B.parse)(e,{});return new Promise(((e,t)=>{if(i.length===a.length){const r=(0,l.zip)(i,a);if(r.every((([e,t])=>ae(e,t)))){const t=[];r.forEach((([e,n])=>{J(e.clientId,"default"),s(e.clientId,n),J(n.clientId,"disabled"),de(),t.push(n.clientId)}));const i=r.find((([e,t])=>e.originalContent!==t.originalContent));le(i[0].clientId),ce(),o({promptContentType:n,uniqueIds:t}),e()}else t("Error")}else console.error("The number of blocks in the editor and the number of blocks parsed from the AI suggestion do not match."),t("Error")}))}(e,s)},pe=()=>{const e=(0,t.select)(E).getBlocks,{setBlockEditingMode:n}=(0,t.dispatch)(E),s=e(),o=ie(s);(0,l.unionBy)(s,o,"clientId").forEach((e=>{n(e.clientId,"default")}))},ge=new DOMParser,me=e=>{const n=(0,t.select)(b).getActiveAIFixesButton(),s=h[n].promptContent,o=(0,t.select)(f).selectUniqueIds(s),{updateUniqueIds:r}=(0,t.dispatch)(f),a=(0,l.get)(window,"YoastSEO.app.refresh",l.noop),c=tinyMCE.get("content");if(!c)return Promise.reject("Editor not available");const d=c.dom,u=ge.parseFromString("<body>"+e+"</body>","text/html");return new Promise(((e,t)=>{((e,t,n)=>{const s=[],o=[];let r=!0,i=!1;return n.forEach((n=>{const a=t.querySelector(`[${j}="${n}"]`),l=e.select(`[${j}=${n}]`)[0];s.push(l),o.push(a),l&&a||(r=!1),(null==l?void 0:l.innerHTML)!==(null==a?void 0:a.innerHTML)&&(i=!0)})),r||console.error("Not all elements are present in the DOM or the AI response.",{elementsFromDOM:s,elementsFromAIResponse:o}),i||console.error("No suggestions found in the AI response.",{elementsFromDOM:s,elementsFromAIResponse:o}),r&&i})(d,u,o)?(o.forEach((e=>{const t=u.querySelector(`[${j}="${e}"]`),n=d.select(`[${j}=${e}]`)[0];d.setHTML(n,t.innerHTML)})),(()=>{const e=document.querySelector(".tmce-active");e&&e.scrollIntoView({behavior:"smooth",block:"start"})})(),(0,i.addFilter)("yoast.analysis.data","yoast-seo-premium/ai-suggestion-analysis-data-modifier",(e=>({...e,text:q(e.text)}))),r({promptContentType:s,uniqueIds:o}),a(),e()):(console.error("Error in previewing suggestion"),t("Error"))}))},he=(e,n,s)=>{const o=(0,t.select)(f).selectUniqueIds(n),r=s.dom;o.forEach((t=>{const n=r.select(`[${j}=${t}]`)[0];if(!n)throw new Error(`Element with data attribute ID "${t}" not found in the editor.`);r.setHTML(n,e(n.innerHTML))}))},ye=(e,n)=>{const{updateUniqueIds:s}=(0,t.dispatch)(f);Y(n,!1),s({promptContentType:e,uniqueIds:[]})},fe=()=>{const e=(0,l.get)(window,"YoastSEO.app.refresh",l.noop),n=(0,t.select)(b).getActiveAIFixesButton();if(!n)return;const s=tinyMCE.get("content");if(!s)return;const o=h[n].promptContent;he(q,o,s),n&&"textParagraphTooLongAIFixes"===n&&((e,n)=>{const s=(0,t.select)(f).selectUniqueIds(e),o=n.dom;s.forEach((e=>{let t=o.select(`[${j}=${e}]`)[0];if(!t)throw new Error(`Element with data attribute ID "${e}" not found in the editor.`);let n,s=1;for(;n=null===(r=t)||void 0===r?void 0:r.querySelector("ins.yst-paragraph");){var r;const i=n.parentNode;o.split(i,n),o.remove(n),t=o.select(`[${j}=${e}]`)[s],s++}}))})(o,s),ye(o,s),e()},we=()=>{const e=(0,l.get)(window,"YoastSEO.app.refresh",l.noop),n=(0,t.select)(b).getActiveAIFixesButton();if(!n)return;const s=tinyMCE.get("content");if(!s)return;const o=h[n].promptContent;he(_,o,s),ye(o,s),e()},be=(0,l.get)(window,"yoast.editorModules.aiGenerator.helpers.fetchSuggestions",l.noop),Ee=(0,k.createSlice)({name:"fixes",initialState:{status:d,error:{code:200,message:"",errorIdentifier:""},fixes:{keyphraseIntroduction:"",keyphraseDensity:"",keyphraseDistribution:"",keyphraseSubheadings:"",sentenceLength:"",paragraphLength:""}},reducers:{setLoading:e=>{e.status=d},setSuccess:(e,{payload:t})=>{e.status=u,e.fixes=t.data},setError:(e,{payload:t})=>{e.status=p,e.error=t}}}),Ce=async(e,t)=>{const{addElementTargetingLogic:n,updatePromptContentType:s,fetchFixes:o,setFetch:r}=t;try{const{text:t,length:i,type:a,uniqueIds:l}=await n(e);s({promptContentType:a,text:t,length:i,uniqueIds:l}),r(await o(e,t))}catch(e){console.error("Error in fetchAiSuggestions:",e)}},Se=(0,l.get)(window,"yoast.editorModules.aiGenerator.components.SuggestionError",l.noop),Ie=(0,l.get)(window,"yoast.editorModules.aiGenerator.components.SparksLimitNotification",l.noop),xe=({assessmentName:n,getEditorContent:s,resetEditorContent:o,previewSuggestions:i,applySuggestions:l,dismissSuggestions:m,removeAutosave:E,disableEditingMode:C,enableEditingMode:S,closeSidebar:x,getFullScreenClass:k,addElementTargetingLogic:M,cleanUpElementTargetingLogic:L})=>{const{areFixesApplied:A,isNotificationVisible:F,counts:R,limit:N}=(0,t.useSelect)((e=>({areFixesApplied:e(f).areFixesApplied(),isNotificationVisible:e(f).isNotificationVisible(),counts:e(y).selectUsageCount(),limit:e(y).selectUsageCountLimit()})),[]),{learnMoreLink:q,helperLink:_}=(0,t.useSelect)((e=>({learnMoreLink:e(b).selectLink("https://yoa.st/ai-fix-assessments-toast-learn-more"),helperLink:e(b).selectLink("https://yoa.st/ai-fix-assessments-help-button")})),[]),{setAreFixesApplied:O,setIsNotificationVisible:B,updatePromptContentType:D}=(0,t.useDispatch)(f),{setActiveAIFixesButton:U,setMarkerStatus:z}=(0,t.useDispatch)(b),[H,j]=(0,r.useState)(""),[V,$]=(0,r.useState)(null),K=(0,r.useRef)(null),{position:Y}=(0,a.useNotificationsContext)(),{fixes:W,fetchFixes:G}=(()=>{const{fetchUsageCount:e}=(0,t.useDispatch)(y),[n,s]=(0,r.useReducer)(Ee.reducer,Ee.getInitialState()),{synonyms:o,focusKeyphrase:i,contentLocale:a,usageCountEndpoint:l}=(0,t.useSelect)((e=>({focusKeyphrase:e(b).getFocusKeyphrase(),synonyms:e("yoast-seo-premium/editor").getSynonyms(),contentLocale:e(b).getContentLocale(),usageCountEndpoint:e(y).selectUsageCountEndpoint()})),[]),c=(0,r.useCallback)((async(n,r,c=!0)=>{s(Ee.actions.setLoading());const d=((e,n,s,o,r)=>{let i=P.languageProcessing.helpers.processExactMatchRequest(s).keyphrase;i.length>191&&(i=i.slice(0,191));const a=h[n].parameterName,l=(0,t.select)(b).getEditorType(),c=w[l];return{focus_keyphrase:i,synonyms:o,language:T(r).replace("_","-"),prompt_content:e,assessment:a,editor:c}})(r,n,i,o,a),{status:u,payload:p}=await be({endpoint:"yoast/v1/ai/optimize/",canAbort:c,data:d});switch(u){case"abort":break;case g:s(Ee.actions.setError(p));break;case"success":p?(s(Ee.actions.setSuccess({assessment:h[n].storeName,data:p})),e({endpoint:l})):s(Ee.actions.setError(p))}return u}),[s]);return{fixes:n,fetchFixes:c}})(),Q=k(),J=(0,r.useMemo)((()=>H===g||W.status===p),[H,W.status]),X=(0,r.useCallback)((()=>{j(""),Ce(n,{addElementTargetingLogic:M,updatePromptContentType:D,fetchFixes:G,setFetch:j})}),[]),Z=(0,r.useCallback)((()=>{o(V),L(),setTimeout((()=>U(null)),150)}),[U,V]),ee=(0,r.useCallback)((()=>{U(null),j("")}),[U]),te=(0,r.useCallback)((()=>{o(V),L(),setTimeout((()=>U(null)),150),B(!1),O(!1)}),[B,U,O,V]),ne=(0,r.useCallback)((()=>{B(!1),j(""),l(),O(!0),setTimeout((()=>{U(null),O(!1)}),5e3)}),[B,U,O,l]),se=(0,r.useCallback)((()=>{S(),O(!1),B(!1)}),[O,B]);return(0,r.useEffect)((()=>(Ce(n,{addElementTargetingLogic:M,updatePromptContentType:D,fetchFixes:G,setFetch:j}),()=>{m(),j("")})),[j,G,m]),(0,r.useEffect)((()=>{W.status===u&&W.fixes&&""!==H&&(null===V&&$(s()),i(W.fixes).catch((()=>{j(g)})))}),[W,H]),E(),C(),(0,r.useEffect)((()=>(F&&z("disabled"),()=>z("enabled"))),[F,z]),(0,r.useEffect)((()=>{const e=document.getElementById("adminmenuwrap");return F&&e?(null===K.current&&(K.current=e.style.zIndex),e.style.zIndex="10"):!F&&e&&null!==K.current&&(e.style.zIndex=K.current,K.current=null),()=>{e&&null!==K.current&&(e.style.zIndex=K.current,K.current=null)}}),[F]),x(),(0,e.createElement)(r.Fragment,null,(0,e.createElement)(I.ErrorModal,{title:h[n].title,badgeText:(0,c.__)("Beta","wordpress-seo-premium"),isOpen:J,onClose:ee,aiModalHelperLink:_},(0,e.createElement)(Se,{errorCode:W.error.code,errorIdentifier:W.error.errorIdentifier,invalidSubscriptions:W.error.missingLicenses,showActions:!0,onRetry:X,errorMessage:W.error.message})),(0,e.createElement)(a.Notifications,{className:v()("yst-mx-[calc(50%-50vw)] yst-transition-all",Q),position:"bottom-left"},W.status!==d&&(0,e.createElement)(Ie,{className:`yst-mb-30 yst-w-96 ${Q}`,size:"large"}),W.status!==p&&!J&&(0,e.createElement)(a.Toast,{id:n,className:"yst-w-96 yst-bg-gradient-to-br yst-from-primary-50 yst-to-indigo-50 yst-border-gradient yst-overflow-y-visible",onDismiss:Z,isVisible:F,setIsVisible:B,position:Y},W.status===d&&(0,e.createElement)(r.Fragment,null,(0,e.createElement)(I.UsageCounter,{className:"yst-absolute yst-w-[65px] yst-h-[18px] yst-top-[-8px] yst-start-[245px] sm:yst-start-[280px]",limit:N,requests:R,isSkeleton:!0}),(0,e.createElement)(I.ToastSkeleton,null)),W.status===u&&(0,e.createElement)(r.Fragment,null,(0,e.createElement)(I.UsageCounter,{className:"yst-absolute yst-top-[-10px] yst-end-9",limit:N,requests:R,isSkeleton:!1}),(0,e.createElement)(I.ToastContent,{title:h[n].title,description:h[n].description,badgeText:"Beta",learnMoreLink:q,learnMoreLinkText:(0,c.__)("Learn more about AI Optimize","wordpress-seo-premium"),dismissButtonText:(0,c.__)("Dismiss","wordpress-seo-premium"),handleDismiss:te,handleApply:ne,applyButtonContent:(0,c.__)("Apply","wordpress-seo-premium")}))),A&&(0,e.createElement)(a.Notifications.Notification,{id:"applied-success-notification",variant:"success",size:"large",dismissScreenReaderLabel:(0,c.__)("Dismiss","wordpress-seo-premium"),autoDismiss:6e3,onDismiss:se,className:"yst-border-slate-200"},(0,e.createElement)("div",{className:"yst-flex yst-items-start yst-justify-between"},(0,e.createElement)("p",{className:"yst-font-medium yst-text-slate-800"}," ",(0,c.__)("Successfully applied!","wordpress-seo-premium")),(0,e.createElement)(a.Button,{type:"button",variant:"tertiary",className:"yst-text-primary-500 yst-py-0",onClick:te},(0,c.__)("Undo","wordpress-seo-premium"))))))};xe.propTypes={assessmentName:S().string.isRequired,getEditorContent:S().func.isRequired,resetEditorContent:S().func.isRequired,previewSuggestions:S().func.isRequired,applySuggestions:S().func.isRequired,dismissSuggestions:S().func.isRequired,removeAutosave:S().func.isRequired,disableEditingMode:S().func.isRequired,enableEditingMode:S().func.isRequired,closeSidebar:S().func.isRequired,getFullScreenClass:S().func.isRequired,addElementTargetingLogic:S().func.isRequired,cleanUpElementTargetingLogic:S().func.isRequired};const ve=(0,l.get)(window,"yoast.editorModules.aiGenerator.components.Introduction",l.noop),ke=(0,l.get)(window,"yoast.editorModules.aiGenerator.components.FeatureError",l.noop),Me=({assessmentName:n,editor:s})=>{const{initialConsent:o,currentSubscriptions:i,hasValidPremiumSubscription:l,hasValidWooSubscription:d}=(0,t.useSelect)((e=>({initialConsent:e(y).selectHasAiGeneratorConsent(),currentSubscriptions:e(y).selectProductSubscriptions(),hasValidPremiumSubscription:e(y).selectPremiumSubscription(),hasValidWooSubscription:e(y).selectWooCommerceSubscription()})),[]),{aiModalHelperLink:u,isSeoAnalysisActive:p,activeAIOptimizeButton:g,isWooProductEntity:m}=(0,t.useSelect)((e=>({isSeoAnalysisActive:e(b).getPreference("isKeywordAnalysisActive",!0),activeAIOptimizeButton:e(b).getActiveAIFixesButton(),aiModalHelperLink:e(b).selectLink("https://yoa.st/ai-fix-assessments-help-button"),isWooProductEntity:e(b).getIsWooProductEntity()})),[]),f=(0,r.useMemo)((()=>!l||!p||!d&&m),[l,p,d,m]),w=g===n,{setActiveAIFixesButton:E}=(0,t.useDispatch)(b),[C,S]=(0,r.useState)(o),x=(0,r.useCallback)((()=>{E(null)}),[E]),v=(0,r.useCallback)((()=>{S(!0),E(n)}),[S,E,n]),k=(0,r.useRef)(null),M=(0,c.__)("Close modal","wordpress-seo-premium"),L=(0,r.useMemo)((()=>{if("Gutenberg"===s)return new z;if("Classic"===s)return new W;throw new Error("Unsupported editor")}),[s]);return w&&(0,e.createElement)(r.Fragment,null,C&&!f&&(0,e.createElement)(xe,{assessmentName:n,getEditorContent:L.getEditorContent,resetEditorContent:L.resetEditorContent,previewSuggestions:L.previewSuggestions,applySuggestions:L.applySuggestions,dismissSuggestions:L.dismissSuggestions,removeAutosave:L.removeAutosave,disableEditingMode:L.disableEditingMode,enableEditingMode:L.enableEditingMode,closeSidebar:L.closeSidebar,getFullScreenClass:L.getFullScreenClass,addElementTargetingLogic:L.addElementTargetingLogic,cleanUpElementTargetingLogic:L.cleanUpElementTargetingLogic}),(0,e.createElement)(I.ErrorModal,{title:h[n].title,isOpen:f,onClose:x,badgeText:(0,c.__)("Beta","wordpress-seo-premium"),aiModalHelperLink:u},(0,e.createElement)(ke,{currentSubscriptions:i,isSeoAnalysisActive:p})),(0,e.createElement)(a.Modal,{className:"yst-introduction-modal",isOpen:!C&&l&&!f,onClose:x,initialFocus:k},(0,e.createElement)(a.Modal.Panel,{className:"yst-max-w-lg yst-p-0 yst-rounded-3xl",closeButtonScreenReaderText:M},(0,e.createElement)(ve,{onStartGenerating:v}))))};Me.propTypes={assessmentName:S().string.isRequired,editor:S().string.isRequired};const Le="aiOptimizeNotificationStatus",Pe=(0,k.createSlice)({name:Le,initialState:!1,reducers:{setIsNotificationVisible:(e,{payload:t})=>t}}),Te=Pe.getInitialState,Ae={isNotificationVisible:e=>(0,l.get)(e,Le,"")},Fe=Pe.actions,Re=Pe.reducer,Ne="appliedFixesStatus",qe=(0,k.createSlice)({name:Ne,initialState:!1,reducers:{setAreFixesApplied:(e,{payload:t})=>t}}),_e=qe.getInitialState,Oe={areFixesApplied:e=>(0,l.get)(e,Ne,"")},Be=qe.actions,De=qe.reducer,Ue="promptContentFixAssessments",ze=(0,k.createSlice)({name:Ue,initialState:{introduction:{text:"",length:0,uniqueIds:[]},fullContent:{text:"",length:0,uniqueIds:[]},sentenceLength:{text:"",length:0,uniqueIds:[]},paragraphLength:{text:"",length:0,uniqueIds:[]}},reducers:{setPromptContentFixAssessments:(e,{payload:t})=>t,updateUniqueIds:(e,{payload:t})=>{const{promptContentType:n,uniqueIds:s}=t;e[n].uniqueIds=s},updatePromptContentType:(e,{payload:t})=>{const{promptContentType:n,text:s,length:o,uniqueIds:r}=t;e[n]&&(e[n].text=s,e[n].length=o,e[n].uniqueIds=r)}}}),He=ze.getInitialState,je={selectPromptContentFixAssessments:e=>(0,l.get)(e,Ue,""),selectUniqueIds:(e,t)=>(0,l.get)(e,[Ue,t,"uniqueIds"],[]),selectPromptContentData:(e,t)=>(0,l.get)(e,[Ue,t],"")},Ve=ze.actions,$e=ze.reducer;let Ke=!1,Ye=null;const We=e=>{const{setPromptContentFixAssessments:n}=(0,t.dispatch)(f),{isNotificationVisible:s}=(0,t.select)(f),{getActiveMarker:o}=(0,t.select)(b);return()=>{const r=(0,l.get)(window,"YoastSEO.analysis.collectData",!1),i=s(),a=o();(async e=>{const{isAIOptimizeNotificationVisible:n,setOnStore:s,collectData:o,activeMarker:r,contentRetrievalStrategy:i}=e,a=o?P.Paper.parse(o()):null,l=[i.getFullText,i.getIntroductionText,i.getParagraphLengthPromptContent,i.getSentenceLengthPromptContent],d=i.shouldRetrievePromptContent();if(!((e,t,n,s)=>!(!e||t||!s||n))(a,n,r,d))return;const u={},p=[],g=(await Promise.all(l.map((async e=>{try{const t={injectAttributes:!1};return await e(a,t)}catch(e){return console.error("Error retrieving relevant content:",e),null}})))).filter((e=>null!==e));0!==g.length&&(g.forEach((({text:e,length:t,type:n,uniqueIds:s})=>{u[n]={text:e,length:t,uniqueIds:s},p.push({length:t,type:n})})),(e=>{const n={};e.forEach((({length:e,type:t})=>{(0===e||e>2e3)&&Object.keys(h).filter((e=>h[e].promptContent===t)).forEach((t=>{n[t]=(e=>{const t=(0,c.__)("None of the elements in your content is supported by Yoast AI Optimize. This means you cannot use this feature with your current content.","wordpress-seo-premium"),n=(0,c.__)("Your text is too long for the AI model to process.","wordpress-seo-premium");return 0===e?t:n})(e)}))}));const{setDisabledAIFixesButtons:s}=(0,t.dispatch)(b);s(n)})(p),s(u))})({isAIOptimizeNotificationVisible:i,setOnStore:n,collectData:r,activeMarker:a,contentRetrievalStrategy:e})}},Ge=e=>{const n=new G(e);We(n),(0,t.subscribe)((0,l.debounce)((e=>{const{getEditorDataContent:n,getReadabilityResults:s,getResultsForFocusKeyword:o}=(0,t.select)(b),{areFixesApplied:r,isNotificationVisible:i}=(0,t.select)(f),a=(0,l.get)(window,"yoast.editorModules.helpers.createWatcher",l.noop),c=((...e)=>()=>e.map((e=>e())))(r,n,(0,l.get)(window,"YoastSEO.analysis.collectData",!1),s,i,(()=>"undefined"!=typeof tinyMCE&&tinyMCE.get("content")),o),d=We(e);return setTimeout(d,1500),a(c,d)})(n),1500,{maxWait:3e3}))},Qe=n=>{Ke||(Ke=!0,"1"!==(0,l.get)(window,"wpseoPremiumAiOptimize.hasSeenIntroduction",!1)&&(()=>{try{L()({path:"yoast/v1/introductions/ai-fix-assessments/seen/",method:"POST"})}catch(e){}})());const s=(0,l.get)(window,"wpseoScriptData.metabox.isRtl",!1),o=(0,t.select)(b).getEditorType(),r=w[o];Ye.render((0,e.createElement)(a.Root,{context:{isRtl:s}},(0,e.createElement)(Me,{assessmentName:n,editor:r})))},Je=()=>{"classicEditor"===(0,t.select)(b).getEditorType()&&(()=>{const e=document.querySelector("#post");if(!e)return;const t=tinyMCE.get("content");t&&(e.addEventListener("submit",(function(){const e=document.querySelector("#content-html");e&&"true"===e.getAttribute("aria-pressed")&&tinyMCE.init({selector:"#content"}),Y(t),t.save()})),e.addEventListener("click",(function(e){"content-html"===e.target.id&&(tinyMCE.init({selector:"#content"}),Y(t))})))})()};o()((()=>{const e=document.getElementById("yoast-seo-premium-ai-optimize");e&&(Ye=(0,r.createRoot)(e),((e={})=>{(0,t.register)((e=>(0,t.createReduxStore)(f,{actions:{...Ve,...Be,...Fe},selectors:{...je,...Oe,...Ae},initialState:(0,l.merge)({},{[Ue]:He(),[Ne]:_e(),[Le]:Te()},e),reducer:(0,t.combineReducers)({[Ue]:$e,[Ne]:De,[Le]:Re})}))(e))})(),(0,i.addAction)("yoast.ai.fixAssessments","yoast/yoast-seo-premium/AiFixAssessments",Qe),setTimeout(Je,100))})),window.jQuery(window).on("YoastSEO:ready",(()=>{const e=(0,t.select)(b).getEditorType();(0,t.select)("core/block-editor")&&"blockEditor"===e&&Ge("blockEditor"),"classicEditor"===e&&Ge("classicEditor")}))})()})();